<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeHub Pro - Professional Code Management</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">
    <link rel="stylesheet" href="style.css">
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-bg': '#1e1e2d',
                        'sidebar-bg': '#27293d',
                        'main-content-bg': '#2c2f45',
                        'primary-blue': '#725af8',
                        'text-faded': '#a0a0b5',
                        'border-dark': '#44476a',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>

<body>
    <!-- Welcome Modal -->
    <div id="welcomeModal" class="modal-overlay">
        <div class="modal-container welcome-modal">
            <div class="modal-header">
                <h2>Welcome to CodeHub Pro! ðŸ‘‹</h2>
            </div>
            <div class="modal-body">
                <div class="welcome-icon">
                    <i class="fas fa-code"></i>
                </div>
                <p>Please tell us your name to get started:</p>
                <input type="text" id="userNameInput" class="form-input" placeholder="Enter your name">
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="saveUserName()">
                    <i class="fas fa-rocket"></i> Start Coding!
                </button>
            </div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-code"></i>
                <span>CodeHub Pro</span>
            </div>

            <div class="nav-menu" id="navMenu">
                <a href="#" class="nav-item active" onclick="switchPage('dashboard')">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" onclick="switchPage('upload')">
                    <i class="fas fa-upload"></i>
                    <span>Upload</span>
                </a>
                <a href="#" class="nav-item" onclick="switchPage('editor')">
                    <i class="fas fa-edit"></i>
                    <span>Editor</span>
                </a>
                <a href="#" class="nav-item" onclick="switchPage('folders')">
                    <i class="fas fa-folder"></i>
                    <span>Folders</span>
                </a>
                <a href="#" class="nav-item" onclick="switchPage('collaboration')">
                    <i class="fas fa-users"></i>
                    <span>Collaboration</span>
                </a>
                <a href="#" class="nav-item" onclick="switchPage('analytics')">
                    <i class="fas fa-chart-bar"></i>
                    <span>Analytics</span>
                </a>
            </div>

            <div class="nav-actions">
                <button class="nav-action-btn" id="themeToggle" onclick="toggleDarkMode()">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="user-menu">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span id="userName">Guest</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Page -->
        <div id="dashboard-page" class="page active">
            <div class="page-header">
                <h1>Dashboard</h1>
                <p>Welcome to your code management workspace</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-file-code"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="totalFiles">0</div>
                        <div class="stat-label">Total Files</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-tags"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="fileTypes">0</div>
                        <div class="stat-label">File Types</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-project-diagram"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="activeProjects">0</div>
                        <div class="stat-label">Active Projects</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="collaborators">0</div>
                        <div class="stat-label">Collaborators</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-database"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="storageUsed">0MB</div>
                        <div class="stat-label">Storage Used</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-number" id="totalLines">0</div>
                        <div class="stat-label">Lines of Code</div>
                    </div>
                </div>
            </div>

            <div class="content-grid">
                <div class="content-card">
                    <div class="card-header">
                        <h3>Recent Activity</h3>
                        <button class="btn btn-sm" onclick="loadActivityLog()">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>
                    <div class="activity-log" id="activityLog">
                        <!-- Activity items will be dynamically added -->
                    </div>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <h3>Quick Actions</h3>
                    </div>
                    <div class="quick-actions">
                        <button class="quick-action-btn" onclick="switchPage('editor')">
                            <i class="fas fa-plus"></i>
                            <span>New File</span>
                        </button>
                        <button class="quick-action-btn" onclick="showCreateProjectModal()">
                            <i class="fas fa-rocket"></i>
                            <span>New Project</span>
                        </button>
                        <button class="quick-action-btn" onclick="switchPage('upload')">
                            <i class="fas fa-upload"></i>
                            <span>Upload Files</span>
                        </button>
                        <button class="quick-action-btn" onclick="switchPage('collaboration')">
                            <i class="fas fa-comments"></i>
                            <span>Start Chat</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Upload Page -->
        <div id="upload-page" class="page">
            <div class="page-header">
                <h1>Upload Files</h1>
                <p>Upload your code files to any folder</p>
            </div>

            <div class="content-card">
                <div class="card-header">
                    <h3>Upload Files</h3>
                </div>

                <div class="upload-section">
                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-folder"></i> Select Folder/Project
                        </label>
                        <select class="form-select" id="uploadFolder">
                            <option value="general">General</option>
                        </select>
                    </div>

                    <div class="upload-area" id="uploadArea">
                        <div id="uploadContent">
                            <div class="upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h3>Drag & Drop Your Files Here</h3>
                            <p>or click to browse your computer</p>
                            <p class="upload-hint">Supports all code files: .js, .py, .java, .cpp, .html, .css, etc.</p>
                        </div>
                        <input type="file" id="fileInput" multiple style="display: none;">
                    </div>

                    <!-- Selected Files Preview -->
                    <div id="selectedFilesPreview" class="selected-files-preview" style="display: none;">
                        <div class="preview-header">
                            <h4>Selected Files</h4>
                            <button class="btn btn-sm btn-danger" onclick="clearSelectedFiles()">
                                <i class="fas fa-times"></i> Clear All
                            </button>
                        </div>
                        <div id="selectedFilesList" class="selected-files-list">
                            <!-- Selected files will appear here -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-comment-dots"></i> File Description
                        </label>
                        <textarea class="form-textarea" id="fileDescription"
                            placeholder="Describe what this file does..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-tags"></i> Tags (comma separated)
                        </label>
                        <input type="text" class="form-input" id="fileTags" placeholder="javascript, frontend, utility">
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-clock"></i> Auto-delete after
                        </label>
                        <select class="form-select" id="fileExpiration">
                            <option value="never">Never</option>
                            <option value="1day">1 Day</option>
                            <option value="1week">1 Week</option>
                            <option value="1month">1 Month</option>
                            <option value="3months">3 Months</option>
                        </select>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-folder-open"></i> Browse Files
                        </button>
                        <button class="btn btn-primary" id="submitBtn" onclick="submitFiles()" disabled>
                            <i class="fas fa-paper-plane"></i> Upload Files
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Folders Page -->
        <div id="folders-page" class="page">
            <div class="page-header">
                <h1>Folders</h1>
                <p>Browse and manage your folders and files</p>
            </div>

            <div class="folders-grid">
                <div class="left-column">
                    <div class="content-card">
                        <div class="card-header">
                            <h3>Your Folders</h3>
                            <div class="header-actions">
                                <button class="btn btn-primary btn-sm" onclick="showCreateFolderModal()">
                                    <i class="fas fa-folder-plus"></i> New Folder
                                </button>
                            </div>
                        </div>
                        <div class="folder-list" id="folderList">
                            <!-- Folders will be dynamically added here -->
                        </div>
                    </div>
                </div>
                <div class="right-column">
                    <!-- File List Section -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3>Files</h3>
                            <div class="header-actions">
                                <div class="search-box">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="searchInput" placeholder="Search files...">
                                </div>
                                <button class="btn btn-secondary" onclick="loadSubmissions()">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                                <button class="btn btn-warning" onclick="toggleBulkSelect()">
                                    <i class="fas fa-check-square"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Bulk Actions -->
                        <div class="bulk-actions" id="bulkActions" style="display: none;">
                            <div class="bulk-actions-content">
                                <span id="selectedCount">0 files selected</span>
                                <div class="bulk-buttons">
                                    <button class="btn btn-danger btn-sm" onclick="deleteSelectedFiles()">
                                        <i class="fas fa-trash"></i> Delete Selected
                                    </button>
                                    <button class="btn btn-secondary btn-sm" onclick="clearSelection()">
                                        <i class="fas fa-times"></i> Clear
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div id="submissionsContainer" class="file-list">
                            <div class="empty-state">
                                <i class="fas fa-folder-open"></i>
                                <h3>No Files Yet</h3>
                                <p>Upload your first code file or create one using the editor!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Editor Page -->
        <div id="editor-page" class="page">
            <div class="page-header">
                <h1>Code Editor</h1>
                <p>Write and edit your code with powerful features</p>
            </div>

            <div class="content-card">
                <div class="editor-controls">
                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-folder"></i> Save to Folder/Project
                        </label>
                        <select class="form-select" id="editorFolder">
                            <option value="general">General</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-file-signature"></i> File Name
                        </label>
                        <input type="text" class="form-input" id="editorFileName"
                            placeholder="example.js, script.py, etc.">
                    </div>
                </div>

                <div class="editor-container">
                    <div class="editor-header">
                        <div class="editor-title">
                            <i class="fas fa-code"></i>
                            <span id="editorTitle">Code Editor</span>
                        </div>
                        <div class="editor-actions">
                            <button class="btn btn-sm btn-secondary" onclick="clearEditor()">
                                <i class="fas fa-broom"></i> Clear
                            </button>
                            <button class="btn btn-sm btn-warning" onclick="formatCode()">
                                <i class="fas fa-magic"></i> Format
                            </button>
                            <button class="btn btn-sm btn-info" onclick="checkSyntax()">
                                <i class="fas fa-check"></i> Check Syntax
                            </button>
                            <button class="btn btn-sm btn-success" onclick="loadTemplate()">
                                <i class="fas fa-file-code"></i> Template
                            </button>
                        </div>
                    </div>
                    <textarea id="codeEditor"></textarea>
                </div>

                <div class="editor-meta">
                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-comment-dots"></i> Description
                        </label>
                        <textarea class="form-textarea" id="editorDescription"
                            placeholder="Describe your code..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-tags"></i> Tags (comma separated)
                        </label>
                        <input type="text" class="form-input" id="editorTags"
                            placeholder="javascript, frontend, utility">
                    </div>
                </div>

                <div class="editor-actions-bottom">
                    <button class="btn btn-primary" onclick="createFileFromEditor()">
                        <i class="fas fa-plus-circle"></i> Create File
                    </button>
                    <button class="btn btn-secondary" id="saveEditBtn" onclick="saveFileEdit()" style="display: none;">
                        <i class="fas fa-save"></i> Save Changes
                    </button>
                    <button class="btn btn-outline" onclick="clearEditor()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </div>
        </div>

        <!-- Collaboration Page -->
        <div id="collaboration-page" class="page">
            <main class="p-6 flex-grow">
                <p class="text-text-faded mb-4">Communicate with your team and manage shared projects.</p>

                <div class="flex collaboration-area gap-6 left-panel shadow-2xl">

                    <!-- Left Panel: Chat and Project Selection (350px width) -->
                    <div class="w-96 flex flex-col custom-scrollbar overflow-y-auto bg-sidebar-bg rounded-xl">

                        <!-- Div 1: Chat Selection -->
                        <div id="conversations-panel" class="p-4 border-b border-border-dark">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-lg font-semibold">Conversations</h2>
                            </div>

                            <!-- Search Box -->
                            <div class="relative mb-4">
                                <input type="text" placeholder="Search chats..."
                                    class="w-full pl-10 pr-4 py-2 bg-main-content-bg rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-blue transition">
                                <i
                                    class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-text-faded text-sm"></i>
                            </div>

                            <!-- Chat List -->
                            <div id="chat-list">
                                <!-- Chat items will be rendered here -->
                            </div>
                        </div>

                        <!-- Div 2: Project Selection -->
                        <div id="projects-panel" class="p-4 flex-grow">
                            <div class="flex justify-between items-center mb-4">
                                <h2 class="text-lg font-semibold">Projects</h2>
                                <button id="new-project-btn"
                                    class="bg-primary-blue w-8 h-8 rounded-full text-white text-lg hover:bg-opacity-90 transition"
                                    onclick="showContent('create-project', null)">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>

                            <!-- Project List -->
                            <div id="project-list">
                                <!-- Project items will be rendered here -->
                            </div>
                        </div>

                    </div>

                    <!-- Div 3: Dynamic Content Area (Right Side) -->
                    <div id="content-area"
                        class="flex-grow bg-main-content-bg p-8 flex flex-col custom-scrollbar overflow-y-auto rounded-xl">
                        <!-- Content will be injected here by JavaScript -->
                    </div>

                </div>
            </main>
        </div>
    </main>

    <!-- Modals -->
    <!-- File Preview Modal -->
    <div id="previewModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modalTitle"><i class="fas fa-file-code"></i> File Preview</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="file-meta" id="modalMeta"></div>
                <div class="file-description" id="modalDescription"></div>
                <pre class="code-preview" id="modalContent"></pre>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success" onclick="downloadCurrentFile()">
                    <i class="fas fa-download"></i> Download File
                </button>
                <button class="btn btn-primary" onclick="copyToClipboard()">
                    <i class="fas fa-copy"></i> Copy Code
                </button>
                <button class="btn btn-warning" onclick="editCurrentFile()">
                    <i class="fas fa-edit"></i> Edit File
                </button>
                <button class="btn btn-secondary" onclick="closeModal()">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Create Folder Modal -->
    <div id="createFolderModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3><i class="fas fa-folder-plus"></i> Create New Folder</h3>
                <button class="modal-close" onclick="closeCreateFolderModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Folder Name</label>
                    <input type="text" class="form-input" id="newFolderName" placeholder="Enter folder name">
                </div>
                <div class="form-group" id="adminFolderOptions" style="display: none;">
                    <label class="form-label">
                        <i class="fas fa-globe"></i> Folder Privacy
                    </label>
                    <select class="form-select" id="folderPrivacy">
                        <option value="private">Private</option>
                        <option value="public">Public (All Users)</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCreateFolderModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-primary" onclick="createFolder()">
                    <i class="fas fa-plus"></i> Create Folder
                </button>
            </div>
        </div>
    </div>

    <!-- Create Project Modal -->
    <div id="createProjectModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3><i class="fas fa-rocket"></i> Create New Project</h3>
                <button class="modal-close" onclick="closeCreateProjectModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Project Name</label>
                    <input type="text" class="form-input" id="newProjectName" placeholder="Enter project name">
                </div>
                <div class="form-group">
                    <label class="form-label">Project Description</label>
                    <textarea class="form-textarea" id="newProjectDescription"
                        placeholder="Describe your project..."></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCreateProjectModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <button class="btn btn-primary" onclick="createProject()">
                    <i class="fas fa-plus"></i> Create Project
                </button>
            </div>
        </div>
    </div>

    <!-- Messages -->
    <div id="successMessage" class="alert alert-success"></div>
    <div id="errorMessage" class="alert alert-error"></div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/clike/clike.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/matchbrackets.min.js"></script>

    <script src="script.js"></script>
</body>

</html>
